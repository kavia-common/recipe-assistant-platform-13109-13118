{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines a React functional component named ChatWidget that implements a chat user interface for an AI cooking assistant. It manages message state, handles service event subscriptions, displays chat messages, and provides user interaction elements such as input box and quick prompts.", "external_files": ["../../styles/chat.css"], "external_methods": ["service.onStatus", "service.onError", "service.onMessage", "service.connect", "service.disconnect", "service.getStatus", "service.sendUserMessage"], "published": ["ChatWidget"], "classes": [], "methods": [{"name": "normalize(list)", "description": "Normalizes the initial message list into a standardized format with unique IDs and roles.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "safeStringify(obj)", "description": "Attempts to JSON stringify a given object, falling back to String() if an error occurs.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "appendAssistantDelta(text)", "description": "Appends a delta (streaming fragment) of assistant message to the current assistant message buffer.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "flushAssistantBuffer()", "description": "Finalizes the streaming assistant message by removing the _streaming flag.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "appendAssistant(text)", "description": "Appends a complete assistant message to the message list.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "appendUser(text)", "description": "Appends a user message to the message list.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "send()", "description": "Sends the current input message via the service, and updates the message list.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "prefillAndSend(text)", "description": "Prefills the input box with a quick prompt and immediately sends it.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "ChatWidget({ service, initialMessages = [], placeholder = \"Ask the cooking assistant anything...\", compact = false, })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["service.onStatus", "service.onError", "service.onMessage", "service.connect", "service.disconnect", "service.getStatus", "service.sendUserMessage"], "search-terms": ["ChatWidget", "React chat UI", "streaming assistant messages", "chat service subscription", "cooking assistant chat"], "state": 2, "file_id": 36, "knowledge_revision": 89, "git_revision": "", "ctags": [{"_type": "tag", "name": "ChatWidget", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^export default function ChatWidget({$/", "language": "JavaScript", "kind": "function", "signature": "({ service, initialMessages = [], placeholder = \"Ask the cooking assistant anything...\", compact = false, })"}, {"_type": "tag", "name": "appendAssistant", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function appendAssistant(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "appendAssistantDelta", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function appendAssistantDelta(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "appendUser", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function appendUser(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "chat-root ${compact ? \"chat-compact\" : \"\"}", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^    <div className={`chat-root ${compact ? \"chat-compact\" : \"\"}`}>$/", "language": "JavaScript", "kind": "field", "scope": "ChatWidget.AnonymousClass5c79d7c60101", "scopeKind": "class"}, {"_type": "tag", "name": "flushAssistantBuffer", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function flushAssistantBuffer() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "input", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^          value={input}$/", "language": "JavaScript", "kind": "field", "scope": "ChatWidget.value", "scopeKind": "class"}, {"_type": "tag", "name": "normalize", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function normalize(list) {$/", "language": "JavaScript", "kind": "function", "signature": "(list)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "placeholder", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^          placeholder={placeholder}$/", "language": "JavaScript", "kind": "field", "scope": "ChatWidget.placeholder", "scopeKind": "class"}, {"_type": "tag", "name": "prefillAndSend", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function prefillAndSend(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "safeStringify", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function safeStringify(obj) {$/", "language": "JavaScript", "kind": "function", "signature": "(obj)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function send() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "ChatWidget", "scopeKind": "function"}], "hash": "198297bc658375d4f52e3e725bf5aa68", "format-version": 4, "code-base-name": "recipe_frontend", "filename": "recipe_frontend/src/components/chat/ChatWidget.jsx", "fields": [{"name": "<div className={`chat-root ${compact ? \"chat-compact\" : \"\"}`}>", "scope": "ChatWidget.AnonymousClass5c79d7c60101", "scopeKind": "class", "description": "unavailable"}, {"name": "value={input}", "scope": "ChatWidget.value", "scopeKind": "class", "description": "unavailable"}, {"name": "placeholder={placeholder}", "scope": "ChatWidget.placeholder", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"89": ""}]}