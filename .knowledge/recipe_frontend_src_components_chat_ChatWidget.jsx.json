{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines a React functional component 'ChatWidget' which provides a chat UI for interacting with a ChatService. It manages message state, handles service events, and renders a chat interface with message list, input box, quick prompts, connection status, and controls.", "external_files": ["../../styles/chat.css"], "external_methods": ["React.useEffect", "React.useMemo", "React.useRef", "React.useState"], "published": [], "classes": [], "methods": [{"name": "normalize(list)", "description": "Normalizes the initial messages array, ensuring each message has a unique ID, role, and string content.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "safeStringify(obj)", "description": "Safely converts an object to a JSON string or falls back to String conversion if serialization fails.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "appendAssistantDelta(text)", "description": "Appends streaming delta text to the last assistant message or creates a new streaming message if necessary.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "flushAssistantBuffer()", "description": "Finalizes streaming assistant message by removing the '_streaming' flag.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "appendAssistant(text)", "description": "Adds a complete assistant message to the message list.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "appendUser(text)", "description": "Adds a user message to the message list.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "send()", "description": "Sends the user input message via the ChatService and updates state accordingly.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "prefillAndSend(text)", "description": "Pre-fills the input box with a prompt and immediately sends it.", "scope": "ChatWidget", "scopeKind": "function"}, {"name": "ChatWidget({ service, initialMessages = [], placeholder = \"Ask the cooking assistant anything...\", compact = false, })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["service?.connect?.()", "service?.disconnect?.()", "service?.sendUserMessage?.(text, { ts: Date.now() })", "service?.getStatus?.()", "service?.onStatus", "service?.onError", "service?.onMessage"], "search-terms": ["ChatWidget", "React functional component", "ChatService", "message normalization", "streaming assistant message", "chat input handling", "connection status"], "state": 2, "file_id": 36, "knowledge_revision": 104, "git_revision": "bd69ea945a0a03e598001ce1ed0f39da99046a6b", "revision_history": [{"89": ""}, {"104": "bd69ea945a0a03e598001ce1ed0f39da99046a6b"}], "ctags": [{"_type": "tag", "name": "ChatWidget", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^export default function ChatWidget({$/", "language": "JavaScript", "kind": "function", "signature": "({ service, initialMessages = [], placeholder = \"Ask the cooking assistant anything...\", compact = false, })"}, {"_type": "tag", "name": "appendAssistant", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function appendAssistant(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "appendAssistantDelta", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function appendAssistantDelta(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "appendUser", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function appendUser(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "chat-root ${compact ? \"chat-compact\" : \"\"}", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^    <div className={`chat-root ${compact ? \"chat-compact\" : \"\"}`}>$/", "language": "JavaScript", "kind": "field", "scope": "ChatWidget.AnonymousClass5c79d7c60101", "scopeKind": "class"}, {"_type": "tag", "name": "flushAssistantBuffer", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function flushAssistantBuffer() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "input", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^          value={input}$/", "language": "JavaScript", "kind": "field", "scope": "ChatWidget.value", "scopeKind": "class"}, {"_type": "tag", "name": "normalize", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function normalize(list) {$/", "language": "JavaScript", "kind": "function", "signature": "(list)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "placeholder", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^          placeholder={placeholder}$/", "language": "JavaScript", "kind": "field", "scope": "ChatWidget.placeholder", "scopeKind": "class"}, {"_type": "tag", "name": "prefillAndSend", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function prefillAndSend(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "safeStringify", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function safeStringify(obj) {$/", "language": "JavaScript", "kind": "function", "signature": "(obj)", "scope": "ChatWidget", "scopeKind": "function"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/components/chat/ChatWidget.jsx", "pattern": "/^  function send() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "ChatWidget", "scopeKind": "function"}], "hash": "225ee779141535e444a05bbabab1cff3", "format-version": 4, "code-base-name": "recipe_frontend", "filename": "recipe_frontend/src/components/chat/ChatWidget.jsx", "fields": [{"name": "<div className={`chat-root ${compact ? \"chat-compact\" : \"\"}`}>", "scope": "ChatWidget.AnonymousClass5c79d7c60101", "scopeKind": "class", "description": "unavailable"}, {"name": "value={input}", "scope": "ChatWidget.value", "scopeKind": "class", "description": "unavailable"}, {"name": "placeholder={placeholder}", "scope": "ChatWidget.placeholder", "scopeKind": "class", "description": "unavailable"}]}