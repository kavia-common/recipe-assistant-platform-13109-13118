{"is_source_file": true, "format": "JavaScript", "description": "This file defines a ChatService module for a web frontend that communicates with a Perplexity backend via REST API. It manages connection state, event subscriptions, and sending user messages to the backend proxy, emitting events for status updates, received messages, and errors.", "external_files": ["../config"], "external_methods": ["PERPLEXITY_PROXY_URL"], "published": ["createChatService"], "classes": [], "methods": [{"name": "createChatService(_unusedPath = null)", "description": "Factory function that creates a chat service object with methods to connect, disconnect, send messages, and subscribe to events, interfacing with a Perplexity proxy endpoint.", "scope": "", "scopeKind": ""}, {"name": "chunkString(str, size)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "connect()", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "disconnect()", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "emit(type, payload)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "getStatus()", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "onClose(cb)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "onError(cb)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "onMessage(cb)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "onOpen(cb)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "onStatus(cb)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "postToPerplexity(prompt, options = {})", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "sendUserMessage(text, metadata = {})", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}, {"name": "setStatus(next)", "scope": "createChatService", "scopeKind": "function", "description": "unavailable"}], "calls": ["fetch", "setTimeout", "emit", "setStatus", "listeners[property]", "listeners[property].add", "listeners[property].delete"], "search-terms": ["chatService", "Perplexity proxy", "REST communication", "createChatService", "event subscription", "message emission", "status management"], "state": 2, "file_id": 35, "knowledge_revision": 99, "git_revision": "bd69ea945a0a03e598001ce1ed0f39da99046a6b", "revision_history": [{"87": ""}, {"99": "bd69ea945a0a03e598001ce1ed0f39da99046a6b"}], "ctags": [{"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^    const body = {$/", "language": "JavaScript", "kind": "class", "scope": "createChatService.postToPerplexity", "scopeKind": "class"}, {"_type": "tag", "name": "chunkString", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function chunkString(str, size) {$/", "language": "JavaScript", "kind": "function", "signature": "(str, size)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "close", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^    close: new Set(),$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.listeners", "scopeKind": "class"}, {"_type": "tag", "name": "connect", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function connect() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "createChatService", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^export function createChatService(_unusedPath = null) {$/", "language": "JavaScript", "kind": "function", "signature": "(_unusedPath = null)"}, {"_type": "tag", "name": "disconnect", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function disconnect() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "emit", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function emit(type, payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(type, payload)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^    error: new Set(),$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.listeners", "scopeKind": "class"}, {"_type": "tag", "name": "getStatus", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function getStatus() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "listeners", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  const listeners = {$/", "language": "JavaScript", "kind": "class", "scope": "createChatService", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^    message: new Set(),$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.listeners", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^      model: options.model || \"llama-3.1-sonar-small-128k-chat\",$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class"}, {"_type": "tag", "name": "onClose", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function onClose(cb) {$/", "language": "JavaScript", "kind": "function", "signature": "(cb)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "onError", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function onError(cb) {$/", "language": "JavaScript", "kind": "function", "signature": "(cb)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "onMessage", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function onMessage(cb) {$/", "language": "JavaScript", "kind": "function", "signature": "(cb)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "onOpen", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function onOpen(cb) {$/", "language": "JavaScript", "kind": "function", "signature": "(cb)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "onStatus", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function onStatus(cb) {$/", "language": "JavaScript", "kind": "function", "signature": "(cb)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "open", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^    open: new Set(),$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.listeners", "scopeKind": "class"}, {"_type": "tag", "name": "postToPerplexity", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  async function postToPerplexity(prompt, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(prompt, options = {})", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "prompt", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^      prompt: String(prompt),$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class"}, {"_type": "tag", "name": "sendUserMessage", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  async function sendUserMessage(text, metadata = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(text, metadata = {})", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "setStatus", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^  function setStatus(next) {$/", "language": "JavaScript", "kind": "function", "signature": "(next)", "scope": "createChatService", "scopeKind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^    status: new Set(),$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.listeners", "scopeKind": "class"}, {"_type": "tag", "name": "stream", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^      stream: false, \\/\\/ simple mode; enable true if your proxy supports streaming$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class"}, {"_type": "tag", "name": "system", "path": "/home/kavia/workspace/code-generation/recipe-assistant-platform-13109-13118/recipe_frontend/src/services/chatService.js", "pattern": "/^      system: options.system || \"You are a helpful cooking assistant.\",$/", "language": "JavaScript", "kind": "property", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class"}], "hash": "541beef3a3902f24f6ababa578442ef2", "format-version": 4, "code-base-name": "recipe_frontend", "filename": "recipe_frontend/src/services/chatService.js", "fields": [{"name": "close: new Set(),", "scope": "createChatService.listeners", "scopeKind": "class", "description": "unavailable"}, {"name": "error: new Set(),", "scope": "createChatService.listeners", "scopeKind": "class", "description": "unavailable"}, {"name": "message: new Set(),", "scope": "createChatService.listeners", "scopeKind": "class", "description": "unavailable"}, {"name": "model: options.model || \"llama-3.1-sonar-small-128k-chat\",", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class", "description": "unavailable"}, {"name": "open: new Set(),", "scope": "createChatService.listeners", "scopeKind": "class", "description": "unavailable"}, {"name": "prompt: String(prompt),", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class", "description": "unavailable"}, {"name": "status: new Set(),", "scope": "createChatService.listeners", "scopeKind": "class", "description": "unavailable"}, {"name": "stream: false, \\/\\/ simple mode; enable true if your proxy supports streaming", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class", "description": "unavailable"}, {"name": "system: options.system || \"You are a helpful cooking assistant.\",", "scope": "createChatService.postToPerplexity.body", "scopeKind": "class", "description": "unavailable"}]}